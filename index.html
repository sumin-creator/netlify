<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›½éš›ä¼šè­°ã®éŸ³å£°ç ”ç©¶ï½œVoice Conversion & TTS Research Platform</title>
    <meta name="description" content="NIPS, ICASSP, NeurIPS, ICML, EUSIPCO, SLT ã§ç™ºè¡¨ã•ã‚ŒãŸéŸ³å£°å¤‰æ›ãƒ»éŸ³å£°åˆæˆã®è«–æ–‡ã‚’è§£èª¬ã—ã€ãƒ‡ãƒ¢ã§ä½“é¨“ã™ã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€‚">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = { tex: { inlineMath: [['$','$'], ['\\(','\\)']], displayMath: [['$$','$$'], ['\\[','\\]']] } };</script>
    <style>
        :root {
            --bg-dark: #0b0f14;
            --bg-card: #141b24;
            --accent: #3b82f6;
            --accent-soft: rgba(59, 130, 246, 0.15);
            --text: #e2e8f0;
            --text-muted: #94a3b8;
            --border: #334155;
            --success: #22c55e;
            --warning: #eab308;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', 'Segoe UI', sans-serif; background: var(--bg-dark); color: var(--text); min-height: 100vh; line-height: 1.6; }
        .container { max-width: 1100px; margin: 0 auto; padding: 24px; }

        .hero {
            text-align: center;
            padding: 56px 24px 48px;
            margin-bottom: 40px;
            background: linear-gradient(160deg, var(--bg-card) 0%, rgba(30,58,95,0.3) 50%, transparent 100%);
            border: 1px solid var(--border);
            border-radius: 20px;
        }
        .hero h1 {
            font-size: clamp(1.6rem, 4.5vw, 2.4rem);
            font-weight: 800;
            margin-bottom: 16px;
            color: #fff;
            letter-spacing: -0.02em;
        }
        .hero .tagline {
            font-size: 1.15rem;
            color: var(--text-muted);
            max-width: 640px;
            margin: 0 auto 24px;
        }
        .hero .tagline strong { color: var(--accent); }
        .conf-strip {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        .conf-badge {
            display: inline-block;
            padding: 8px 14px;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 700;
            letter-spacing: 0.03em;
        }
        .conf-badge.nips  { background: rgba(139, 92, 246, 0.25); color: #a78bfa; }
        .conf-badge.eusipco { background: rgba(34, 197, 94, 0.2);  color: #4ade80; }
        .conf-badge.slt   { background: rgba(249, 115, 22, 0.2);  color: #fb923c; }
        .conf-badge.icassp{ background: rgba(59, 130, 246, 0.25); color: #60a5fa; }
        .conf-badge.neurips{ background: rgba(168, 85, 247, 0.2); color: #c084fc; }
        .conf-badge.icml  { background: rgba(236, 72, 153, 0.2);  color: #f472b6; }

        .section-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--accent);
            color: #fff;
        }
        .section-intro { color: var(--text-muted); margin-bottom: 24px; font-size: 0.95rem; }

        /* å›½éš›ä¼šè­° è«–æ–‡ã‚«ãƒ¼ãƒ‰ */
        .papers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
            margin-bottom: 48px;
        }
        .paper-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 24px;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .paper-card:hover { border-color: var(--accent); box-shadow: 0 8px 24px rgba(0,0,0,0.2); }
        .paper-card .conf-badges { margin-bottom: 12px; }
        .paper-card .conf-badges .conf-badge { margin-right: 6px; margin-bottom: 6px; }
        .paper-card h3 { font-size: 1.15rem; margin-bottom: 8px; color: #fff; line-height: 1.35; }
        .paper-card .authors { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 10px; }
        .paper-card .impact { font-size: 0.9rem; color: var(--text); margin-bottom: 14px; padding-left: 12px; border-left: 3px solid var(--accent-soft); }
        .paper-card .cta { font-size: 0.9rem; }
        .paper-card .cta a { color: var(--accent); font-weight: 600; text-decoration: none; }
        .paper-card .cta a:hover { text-decoration: underline; }

        .tabs { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 24px; }
        .tab { padding: 12px 20px; background: var(--bg-card); color: var(--text); border: 1px solid var(--border); border-radius: 8px; cursor: pointer; font-size: 0.95rem; font-weight: 600; }
        .tab:hover { background: var(--accent-soft); border-color: var(--accent); }
        .tab.active { background: var(--accent); border-color: var(--accent); color: #fff; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .panel {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
        }
        .panel h3 { font-size: 1.15rem; margin-bottom: 12px; color: #fff; }
        .paper-ref {
            background: rgba(234, 179, 8, 0.08);
            border-left: 4px solid var(--warning);
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 0.9rem;
        }
        .paper-ref h4 { color: #facc15; margin-bottom: 8px; font-size: 1rem; }
        .paper-ref p { color: var(--text-muted); }
        .impl-note { background: rgba(34, 197, 94, 0.08); border-left: 4px solid var(--success); padding: 12px; border-radius: 8px; margin: 12px 0; font-size: 0.9rem; }
        .impl-note.warn { background: rgba(234, 179, 8, 0.08); border-left-color: var(--warning); }
        .math-block { background: #0f172a; padding: 16px; border-radius: 8px; overflow-x: auto; margin: 12px 0; font-size: 0.95rem; }
        .controls { margin: 12px 0; }
        label { display: block; margin-bottom: 4px; font-size: 0.9rem; color: var(--text-muted); }
        input[type="file"], input[type="range"], select, textarea {
            width: 100%; max-width: 400px; padding: 8px 12px; background: var(--bg-dark); border: 1px solid var(--border);
            border-radius: 6px; color: var(--text); margin-bottom: 8px;
        }
        button { padding: 12px 24px; background: var(--accent); color: #fff; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; margin: 4px 8px 4px 0; }
        button:hover { filter: brightness(1.1); }
        button:disabled { opacity: 0.6; cursor: not-allowed; }
        audio { width: 100%; max-width: 500px; margin: 12px 0; }
        canvas { width: 100%; max-height: 280px; background: #0f172a; border-radius: 8px; border: 1px solid var(--border); margin: 12px 0; }
        .grid2 { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }

        #api-unavailable-banner {
            display: none; background: rgba(234, 179, 8, 0.15); border: 1px solid var(--warning); border-radius: 8px;
            padding: 12px 16px; margin-bottom: 20px; color: #facc15; font-size: 0.95rem;
        }
        #api-unavailable-banner.show { display: block; }
        #api-unavailable-banner a { color: #93c5fd; }

        .footer-ack {
            margin-top: 48px; padding-top: 24px; border-top: 1px solid var(--border);
            font-size: 0.9rem; color: var(--text-muted); text-align: center;
        }
        .footer-ack strong { color: var(--text); }
    </style>
</head>
<body>
    <div class="container">
        <div id="api-unavailable-banner" role="alert">
            <strong>APIï¼ˆNetlify Functionsï¼‰ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚</strong><br>
            ãƒ•ã‚©ãƒ«ãƒãƒ³ãƒˆåˆæˆãƒ»F0åˆ†æãƒ»ç°¡æ˜“éŸ³å£°å¤‰æ›ã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†å¾Œã¾ãŸã¯ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰ãŠè©¦ã—ãã ã•ã„ã€‚<br>
            <a href="https://docs.netlify.com/functions/overview/" target="_blank" rel="noopener">Netlify Functions</a> ã®ãƒ‡ãƒ—ãƒ­ã‚¤çŠ¶æ³ã‚’ã”ç¢ºèªãã ã•ã„ã€‚
        </div>

        <header class="hero">
            <h1>å›½éš›ä¼šè­°ã®éŸ³å£°ç ”ç©¶ã‚’ã€è§£èª¬ã¨ãƒ‡ãƒ¢ã§ä½“é¨“ã™ã‚‹</h1>
            <p class="tagline">
                <strong>NIPSãƒ»ICASSPãƒ»NeurIPSãƒ»ICMLãƒ»EUSIPCOãƒ»SLT</strong> ã§ç™ºè¡¨ã•ã‚ŒãŸéŸ³å£°å¤‰æ›ãƒ»éŸ³å£°åˆæˆã®è«–æ–‡ã‚’ã€æ•°å¼ãƒ»è§£èª¬ã¨ã€Œä»Šã™ãè©¦ã›ã‚‹ãƒ‡ãƒ¢ã€ã§å­¦ã¹ã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚
            </p>
            <div class="conf-strip">
                <span class="conf-badge nips">NIPS 2016</span>
                <span class="conf-badge eusipco">EUSIPCO 2018</span>
                <span class="conf-badge slt">SLT 2018</span>
                <span class="conf-badge icassp">ICASSP 2019</span>
                <span class="conf-badge neurips">NeurIPS 2019</span>
                <span class="conf-badge icml">ICML 2021</span>
            </div>
        </header>

        <h2 class="section-title">å›½éš›ä¼šè­°ã§ç™ºè¡¨ã•ã‚ŒãŸæ‰‹æ³•</h2>
        <p class="section-intro">éŸ³å£°å¤‰æ›ãƒ»éŸ³å£°åˆæˆã®ä»£è¡¨çš„ãªå›½éš›ä¼šè­°è«–æ–‡ã‚’å¹´ä»£é †ã«æ²è¼‰ã€‚å„æ‰‹æ³•ã®æ¦‚è¦ã¨ã€ã“ã®ã‚µã‚¤ãƒˆã§ã§ãã‚‹ã“ã¨ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚è·é›¢ãƒ»ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹ï¼ˆJensen, Bregman, Bhattacharyya, Chord Gapï¼‰ã®ç†è«–ã¯<strong> <a href="#" onclick="switchTab('divergence', document.getElementById('tab-divergence')); return false;" style="color: var(--accent);">ç†è«–ãƒ»ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹</a></strong>ã‚¿ãƒ–ã§æ•°å¼ä»˜ãã§è§£èª¬ã—ã¦ã„ã¾ã™ã€‚</p>

        <div class="papers-grid">
            <div class="paper-card">
                <div class="conf-badges"><span class="conf-badge nips">NIPS 2016</span></div>
                <h3>WaveNet: A Generative Model for Raw Audio</h3>
                <p class="authors">van den Oord, Dieleman, Zen, et al. (DeepMind)</p>
                <p class="impact">ç”Ÿæ³¢å½¢ã‚’è‡ªå·±å›å¸°ã§ç”Ÿæˆã€‚TTSãƒ»VC ã®ãƒœã‚³ãƒ¼ãƒ€ã®åŸºç›¤ã¨ãªã‚Šã€å¾Œã® VITS ãªã©ã«å½±éŸ¿ã€‚</p>
                <p class="cta"><a href="#" onclick="switchTab('papers', this); document.getElementById('papers').querySelector('.panel:last-of-type').scrollIntoView(); return false;">è«–æ–‡è©³ç´°ãƒ»æ•°å¼ â†’</a></p>
            </div>
            <div class="paper-card">
                <div class="conf-badges"><span class="conf-badge eusipco">EUSIPCO 2018</span><span class="conf-badge icassp">ICASSP 2019</span></div>
                <h3>CycleGAN-VC: Non-parallel Voice Conversion</h3>
                <p class="authors">Kaneko, Kameoka, Tanaka, Hojo</p>
                <p class="impact">å¯¾å¿œã¥ã‘ã®ãªã„2è©±è€…ãƒ‡ãƒ¼ã‚¿ã§ã€Cycle ä¸€è²«æ€§ã¨æ•µå¯¾å­¦ç¿’ã«ã‚ˆã‚Šè©±è€…å¤‰æ›ã‚’å®Ÿç¾ã€‚</p>
                <p class="cta"><a href="research.html">è©³ç´°ãƒ‡ãƒ¢ãƒ»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ â†’</a> ï½œ <a href="#" onclick="switchTab('papers', this); return false;">æ•°å¼ãƒ»è§£èª¬</a></p>
            </div>
            <div class="paper-card">
                <div class="conf-badges"><span class="conf-badge slt">SLT 2018</span><span class="conf-badge icassp">ICASSP 2019</span></div>
                <h3>StarGAN-VC: Many-to-Many Voice Conversion</h3>
                <p class="authors">Kameoka, Kaneko, Tanaka, Hojo</p>
                <p class="impact">1ã¤ã® Generator ã§è¤‡æ•°è©±è€…é–“ã®å¤šå¯¾å¤šå¤‰æ›ã€‚ãƒ‰ãƒ¡ã‚¤ãƒ³åˆ†é¡æå¤±ã§è©±è€…ã‚’åˆ¶å¾¡ã€‚</p>
                <p class="cta"><a href="research.html">è©³ç´°ãƒ‡ãƒ¢ â†’</a> ï½œ <a href="#" onclick="switchTab('papers', this); return false;">æ•°å¼ãƒ»è§£èª¬</a></p>
            </div>
            <div class="paper-card">
                <div class="conf-badges"><span class="conf-badge neurips">NeurIPS 2019</span></div>
                <h3>AutoVC: Zero-Shot Voice Style Transfer</h3>
                <p class="authors">Qian, Zhang, Chang, Hasegawa-Johnson</p>
                <p class="impact">ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè©±è€…ã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ãªã—ã§ã€æ•°ç§’ã®å‚ç…§éŸ³å£°ã‹ã‚‰ã‚¼ãƒ­ã‚·ãƒ§ãƒƒãƒˆéŸ³å£°å¤‰æ›ã€‚</p>
                <p class="cta"><a href="#" onclick="switchTab('papers', this); return false;">è«–æ–‡è©³ç´°ãƒ»æ•°å¼ â†’</a></p>
            </div>
            <div class="paper-card">
                <div class="conf-badges"><span class="conf-badge icml">ICML 2021</span></div>
                <h3>VITS: Conditional VAE with Adversarial Learning for TTS</h3>
                <p class="authors">Kim, Kong, Son (Kakao)</p>
                <p class="impact">ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰è‡ªç„¶ãªéŸ³å£°ã‚’ end-to-end ã§åˆæˆã€‚VAEãƒ»æ•µå¯¾å­¦ç¿’ãƒ»Monotonic Alignment ã‚’çµ„ã¿åˆã‚ã›ãŸ TTSã€‚</p>
                <p class="cta"><a href="#" onclick="switchTab('demo', this); return false;">ãƒ•ã‚©ãƒ«ãƒãƒ³ãƒˆãƒ‡ãƒ¢ã§é›°å›²æ°—ã‚’ä½“é¨“ â†’</a> ï½œ <a href="#" onclick="switchTab('papers', this); return false;">æ•°å¼</a></p>
            </div>
        </div>

        <h2 class="section-title">ãƒ¡ãƒ‹ãƒ¥ãƒ¼</h2>
        <div class="tabs">
            <button class="tab" onclick="switchTab('conference', this)">å›½éš›ä¼šè­°ã®æ‰‹æ³•</button>
            <button class="tab active" onclick="switchTab('demo', this)">ã™ãè©¦ã›ã‚‹ãƒ‡ãƒ¢</button>
            <button class="tab" onclick="switchTab('papers', this)">è«–æ–‡è©³ç´°ãƒ»æ•°å¼</button>
            <button class="tab" id="tab-divergence" onclick="switchTab('divergence', this)">ç†è«–ãƒ»ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹</button>
            <button class="tab" onclick="switchTab('advanced', this)">è©³ç´°ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸</button>
        </div>

        <!-- å›½éš›ä¼šè­°ã®æ‰‹æ³•ï¼ˆã‚¿ãƒ–å†…ã§ä¸Šè¨˜ã‚°ãƒªãƒƒãƒ‰ã®è¦ç´„ã‚’å†æ²ï¼‰ -->
        <div id="conference" class="tab-content">
            <div class="panel">
                <h3>æ²è¼‰ã—ã¦ã„ã‚‹å›½éš›ä¼šè­°ã¨è«–æ–‡</h3>
                <p style="color: var(--text-muted); margin-bottom: 16px;">éŸ³å£°ãƒ»ä¿¡å·å‡¦ç†ãƒ»æ©Ÿæ¢°å­¦ç¿’ã®ãƒˆãƒƒãƒ—ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã§ç™ºè¡¨ã•ã‚ŒãŸæ‰‹æ³•ã‚’ã€è§£èª¬ã¨ãƒ‡ãƒ¢ã§æ´»ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p>
                <ul style="color: var(--text-muted); padding-left: 20px; line-height: 1.9;">
                    <li><strong class="conf-badge nips" style="padding: 2px 8px; margin-right: 8px;">NIPS 2016</strong> WaveNet</li>
                    <li><strong class="conf-badge eusipco" style="padding: 2px 8px; margin-right: 8px;">EUSIPCO 2018</strong> CycleGAN-VC</li>
                    <li><strong class="conf-badge slt" style="padding: 2px 8px; margin-right: 8px;">SLT 2018</strong> StarGAN-VC</li>
                    <li><strong class="conf-badge icassp" style="padding: 2px 8px; margin-right: 8px;">ICASSP 2019</strong> CycleGAN-VC, StarGAN-VC</li>
                    <li><strong class="conf-badge neurips" style="padding: 2px 8px; margin-right: 8px;">NeurIPS 2019</strong> AutoVC</li>
                    <li><strong class="conf-badge icml" style="padding: 2px 8px; margin-right: 8px;">ICML 2021</strong> VITS</li>
                </ul>
                <p style="margin-top: 16px;"><a href="#" onclick="document.querySelector('.papers-grid').scrollIntoView({behavior:'smooth'}); return false;" style="color: var(--accent); font-weight: 600;">â†‘ ä¸Šè¨˜ã®è«–æ–‡ã‚«ãƒ¼ãƒ‰ã¸</a></p>
            </div>
        </div>

        <!-- ã™ãè©¦ã›ã‚‹ãƒ‡ãƒ¢ -->
        <div id="demo" class="tab-content active">
            <div class="panel">
                <h3>ğŸ“Š ã‚¹ãƒšã‚¯ãƒˆãƒ«åˆ†æ</h3>
                <p style="margin-bottom:12px; color: var(--text-muted);">è«–æ–‡ã§ã‚ˆãä½¿ã‚ã‚Œã‚‹ãƒ¡ãƒ«ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ã€ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§ç¢ºèªã§ãã¾ã™ã€‚</p>
                <input type="file" id="demo-spectrum-file" accept="audio/wav,audio/*">
                <button onclick="demoSpectrum()">åˆ†æã—ã¦è¡¨ç¤º</button>
                <div class="grid2" style="margin-top:16px;">
                    <div><strong>æ³¢å½¢</strong><canvas id="demo-waveform" height="200"></canvas></div>
                    <div><strong>ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ </strong><canvas id="demo-spectrogram" height="200"></canvas></div>
                </div>
                <audio id="demo-audio" controls style="margin-top:12px;"></audio>
            </div>
            <div class="panel">
                <h3>ğŸšï¸ ãƒ•ã‚©ãƒ«ãƒãƒ³ãƒˆåˆæˆï¼ˆAPIï¼‰</h3>
                <p style="margin-bottom:12px; color: var(--text-muted);">å¤å…¸çš„ãªéŸ³å£°åˆæˆã®åŸºç¤ã€‚F0ãƒ»ãƒ•ã‚©ãƒ«ãƒãƒ³ãƒˆã§éŸ³ã‚’ç”Ÿæˆã—ã¾ã™ã€‚</p>
                <div class="controls">
                    <label>F0 (Hz)</label>
                    <input type="range" id="formant-f0" min="80" max="400" value="150">
                    <span id="formant-f0-val">150</span> Hz
                </div>
                <button onclick="demoFormant()">åˆæˆã—ã¦å†ç”Ÿ</button>
                <audio id="formant-audio" controls style="margin-top:12px;"></audio>
            </div>
            <div class="panel">
                <h3>ğŸ“ˆ F0åˆ†æï¼ˆAPIï¼‰</h3>
                <p style="margin-bottom:12px; color: var(--text-muted);">éŸ³å£°å¤‰æ›ã®å‰å‡¦ç†ã¨ã—ã¦é‡è¦ãªåŸºæœ¬å‘¨æ³¢æ•°ï¼ˆãƒ”ãƒƒãƒï¼‰è»Œè·¡ã‚’æ¨å®šã—ã¾ã™ã€‚</p>
                <input type="file" id="demo-f0-file" accept="audio/wav,audio/*">
                <button onclick="demoF0()">F0åˆ†æ</button>
                <pre id="f0-result" style="margin-top:12px; padding:12px; background:#0f172a; border-radius:8px; font-size:0.85rem; overflow:auto;"></pre>
            </div>
            <div class="panel">
                <h3>ğŸ”„ ç°¡æ˜“éŸ³å£°å¤‰æ›ï¼ˆAPIï¼‰</h3>
                <div class="impl-note warn">CycleGAN-VC / StarGAN-VC ã®ã€Œæœ¬ç‰©ã€ã¯å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ãŒå¿…è¦ã§ã™ã€‚ã“ã“ã§ã¯ãƒ”ãƒƒãƒã‚·ãƒ•ãƒˆç­‰ã®ç°¡æ˜“ãƒ‡ãƒ¢ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚</div>
                <input type="file" id="demo-vc-file" accept="audio/wav,audio/*">
                <label>å¤‰æ›å¼·åº¦ (0â€“100%)</label>
                <input type="range" id="demo-vc-strength" min="0" max="100" value="50">
                <button onclick="demoSimpleVC()">ç°¡æ˜“å¤‰æ›ã—ã¦å†ç”Ÿ</button>
                <audio id="vc-output" controls style="margin-top:12px;"></audio>
            </div>
        </div>

        <!-- è«–æ–‡è©³ç´°ãƒ»æ•°å¼ -->
        <div id="papers" class="tab-content">
            <div class="panel">
                <h3>ã“ã®ã‚µã‚¤ãƒˆã§ã®ä½ç½®ã¥ã‘</h3>
                <p style="color: var(--text-muted);">ä»¥ä¸‹ã®æ‰‹æ³•ã¯å›½éš›ä¼šè­°ã§ç™ºè¡¨ã•ã‚ŒãŸã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã™ã€‚æœ¬ã‚µã‚¤ãƒˆã§ã¯ <strong>è«–æ–‡ã®è§£èª¬ãƒ»æ•°å¼ã®å‚ç…§</strong> ã¨ã€å¯èƒ½ãªç¯„å›²ã® <strong>ç°¡æ˜“ãƒ‡ãƒ¢</strong> ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚æœ¬æ ¼å†ç¾ã«ã¯å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ãƒ»ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒå¿…è¦ã§ã™ã€‚</p>
            </div>
            <div class="panel">
                <span class="conf-badge eusipco">EUSIPCO 2018</span> <span class="conf-badge icassp">ICASSP 2019</span>
                <h3>CycleGAN-VC</h3>
                <div class="paper-ref">
                    <h4>CycleGAN-VC: Non-parallel voice conversion using cycle-consistent adversarial networks</h4>
                    <p><strong>è‘—è€…:</strong> Takuhiro Kaneko, Hirokazu Kameoka, Kou Tanaka, Nobukatsu Hojo</p>
                </div>
                <p><strong>è²¢çŒ®:</strong> å¯¾å¿œã¥ã‘ã®ãªã„2è©±è€…ã§ã€Cycle ä¸€è²«æ€§æå¤±ã¨æ•µå¯¾æå¤±ã«ã‚ˆã‚Šè©±è€…å¤‰æ›ã€‚</p>
                <div class="math-block">$L_G = L_{adv} + \lambda_{cyc} L_{cyc} + \lambda_{id} L_{id}$</div>
                <div class="impl-note warn">å½“ã‚µã‚¤ãƒˆã§ã¯ç°¡æ˜“ã‚¹ãƒšã‚¯ãƒˆãƒ«å¤‰æ›ã§é›°å›²æ°—ã‚’å†ç¾ã€‚æœ¬æ ¼å†ç¾ã¯å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ãŒå¿…è¦ã€‚</div>
            </div>
            <div class="panel">
                <span class="conf-badge slt">SLT 2018</span> <span class="conf-badge icassp">ICASSP 2019</span>
                <h3>StarGAN-VC</h3>
                <div class="paper-ref">
                    <h4>StarGAN-VC: Non-parallel many-to-many voice conversion using star generative adversarial networks</h4>
                    <p><strong>è‘—è€…:</strong> Hirokazu Kameoka, Takuhiro Kaneko, Kou Tanaka, Nobukatsu Hojo</p>
                </div>
                <p><strong>è²¢çŒ®:</strong> 1ã¤ã® Generator ã§å¤šå¯¾å¤šå¤‰æ›ã€‚ãƒ‰ãƒ¡ã‚¤ãƒ³åˆ†é¡æå¤±ã§è©±è€…ã‚’æŒ‡å®šã€‚</p>
                <div class="math-block">$L_G = L_{adv} + \lambda_{cls} L_{cls}^r + \lambda_{cyc} L_{cyc} + \lambda_{id} L_{id}$</div>
                <div class="impl-note warn">å½“ã‚µã‚¤ãƒˆã§ã¯è©±è€…IDã«å¿œã˜ãŸç°¡æ˜“ãƒ‡ãƒ¢ã®ã¿ã€‚</div>
            </div>
            <div class="panel">
                <span class="conf-badge neurips">NeurIPS 2019</span>
                <h3>AutoVC</h3>
                <div class="paper-ref">
                    <h4>AutoVC: Zero-shot voice style transfer with only autoencoder loss</h4>
                    <p><strong>è‘—è€…:</strong> Kaizhi Qian, Yang Zhang, Shiyu Chang, Mark Hasegawa-Johnson</p>
                </div>
                <p><strong>è²¢çŒ®:</strong> ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè©±è€…ã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ãªã—ã§ã‚¼ãƒ­ã‚·ãƒ§ãƒƒãƒˆå¤‰æ›ã€‚å†…å®¹ Encoder ã¨è©±è€… Encoder ã®åˆ†é›¢ã€‚</p>
                <div class="math-block">$\hat{x}_{conv} = D(E_c(x_{src}), E_s(x_{tgt}))$</div>
                <div class="impl-note warn">å½“ã‚µã‚¤ãƒˆã§ã¯è§£èª¬ã®ã¿ã€‚å®Ÿè£…ã¯ Encoder/Decoder ã®å­¦ç¿’ãŒå¿…è¦ã€‚</div>
            </div>
            <div class="panel">
                <span class="conf-badge icml">ICML 2021</span>
                <h3>VITS</h3>
                <div class="paper-ref">
                    <h4>VITS: Conditional variational autoencoder with adversarial learning for end-to-end text-to-speech</h4>
                    <p><strong>è‘—è€…:</strong> Jaehyeon Kim, Jungil Kong, Juhee Son</p>
                </div>
                <p><strong>è²¢çŒ®:</strong> ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰è‡ªç„¶éŸ³å£°ã‚’ end-to-end ã§åˆæˆã€‚VAE + æ•µå¯¾å­¦ç¿’ + Monotonic Alignmentã€‚</p>
                <div class="math-block">$L = L_{recon} + \lambda_{kl} L_{kl} + \lambda_{adv} L_{adv}$</div>
                <div class="impl-note warn">å½“ã‚µã‚¤ãƒˆã§ã¯ãƒ•ã‚©ãƒ«ãƒãƒ³ãƒˆåˆæˆã«ã‚ˆã‚‹ç°¡æ˜“ TTS ãƒ‡ãƒ¢ã®ã¿ã€‚</div>
            </div>
            <div class="panel">
                <span class="conf-badge nips">NIPS 2016</span>
                <h3>WaveNet</h3>
                <div class="paper-ref">
                    <h4>WaveNet: A generative model for raw audio</h4>
                    <p><strong>è‘—è€…:</strong> Aaron van den Oord, Sander Dieleman, Heiga Zen, et al. (DeepMind)</p>
                </div>
                <p><strong>è²¢çŒ®:</strong> ç”Ÿæ³¢å½¢ã®è‡ªå·±å›å¸°ç”Ÿæˆã€‚Dilated causal convolutionã€‚TTSãƒ»VC ã®ãƒœã‚³ãƒ¼ãƒ€åŸºç›¤ã€‚</p>
                <div class="math-block">$p(x_t | x_{&lt;t})$ ã‚’ãƒ¢ãƒ‡ãƒ«åŒ–ã€‚Dilated causal convolution + gated activation.</div>
                <div class="impl-note warn">å½“ã‚µã‚¤ãƒˆã§ã¯è§£èª¬ã®ã¿ã€‚æ¨è«–ã¯é‡ã„ãŸã‚æœªå®Ÿè£…ã€‚</div>
            </div>
        </div>

        <!-- ç†è«–ãƒ»ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹ï¼ˆNielsen: Chord Gap, Jensen, Bregman, Bhattacharyyaï¼‰ -->
        <div id="divergence" class="tab-content">
            <div class="panel" style="border-color: var(--accent);">
                <h3>ğŸ“ è¨ˆç®—ãƒ‡ãƒ¢ï¼ˆè«–æ–‡ã®å¼ã‚’ãã®ã¾ã¾è¨ˆç®—ï¼‰</h3>
                <p style="color: var(--text-muted); margin-bottom: 12px;">APIï¼ˆ<code>research_api.py</code>ï¼‰ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã¨ãã€ä»¥ä¸‹ã§ Jensen / Bregman / Bhattacharyya / ã‚»ãƒ³ãƒˆãƒ­ã‚¤ãƒ‰ / k-means++ ã‚’è¨ˆç®—ã§ãã¾ã™ã€‚</p>
                <div class="grid2">
                    <div>
                        <strong>Jensen ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹</strong> â€” p, q (JSONé…åˆ—), F: <input type="text" id="d-jensen-p" placeholder="[0,0]" style="width:80px"> <input type="text" id="d-jensen-q" placeholder="[1,1]" style="width:80px">
                        <select id="d-jensen-f"><option value="squared">squared</option><option value="entropy">entropy</option></select>
                        <button onclick="calcJensen()">è¨ˆç®—</button>
                        <pre id="out-jensen" style="margin-top:6px; font-size:0.85rem; min-height:40px;"></pre>
                    </div>
                    <div>
                        <strong>ã‚¹ã‚­ãƒ¥ãƒ¼ Jensen</strong> â€” p, q, Î±: <input type="text" id="d-skew-p" placeholder="[0,0]" style="width:70px"> <input type="text" id="d-skew-q" placeholder="[1,1]" style="width:70px"> <input type="number" id="d-skew-a" min="0.01" max="0.99" step="0.1" value="0.5" style="width:50px">
                        <button onclick="calcSkewJensen()">è¨ˆç®—</button>
                        <pre id="out-skew" style="margin-top:6px; font-size:0.85rem; min-height:40px;"></pre>
                    </div>
                    <div>
                        <strong>Bregman</strong> â€” p, q, F: <input type="text" id="d-bregman-p" placeholder="[1,1]" style="width:70px"> <input type="text" id="d-bregman-q" placeholder="[2,2]" style="width:70px">
                        <select id="d-bregman-f"><option value="squared">squared</option><option value="entropy">entropy</option></select>
                        <button onclick="calcBregman()">è¨ˆç®—</button>
                        <pre id="out-bregman" style="margin-top:6px; font-size:0.85rem; min-height:40px;"></pre>
                    </div>
                    <div>
                        <strong>Bhattacharyyaï¼ˆã‚¬ã‚¦ã‚¹ï¼‰</strong> â€” Î¼1,ÏƒÂ²1, Î¼2,ÏƒÂ²2: <input type="number" id="d-bhat-m1" value="0" style="width:50px"> <input type="number" id="d-bhat-v1" value="1" style="width:50px"> <input type="number" id="d-bhat-m2" value="1" style="width:50px"> <input type="number" id="d-bhat-v2" value="1" style="width:50px">
                        <button onclick="calcBhattacharyya()">è¨ˆç®—</button>
                        <pre id="out-bhat" style="margin-top:6px; font-size:0.85rem; min-height:40px;"></pre>
                    </div>
                    <div>
                        <strong>Chord gapï¼ˆäºŒãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰</strong> â€” p, q, Î², Î³: <input type="text" id="d-chord-p" placeholder="[0,0]" style="width:60px"> <input type="text" id="d-chord-q" placeholder="[1,1]" style="width:60px"> <input type="number" id="d-chord-beta" value="0.3" min="0.01" max="0.99" step="0.05" style="width:50px"> <input type="number" id="d-chord-gamma" value="0.5" min="0.01" max="0.99" step="0.05" style="width:50px">
                        <button onclick="calcChordGap()">è¨ˆç®—</button>
                        <pre id="out-chord" style="margin-top:6px; font-size:0.85rem; min-height:40px;"></pre>
                    </div>
                    <div>
                        <strong>Jensenâ€“Bregman (JB)</strong> â€” p, q, Î±: <input type="text" id="d-jb-p" placeholder="[1,1]" style="width:70px"> <input type="text" id="d-jb-q" placeholder="[2,2]" style="width:70px"> <input type="number" id="d-jb-a" value="0.5" min="0.01" max="0.99" step="0.1" style="width:50px">
                        <button onclick="calcJB()">è¨ˆç®—</button>
                        <pre id="out-jb" style="margin-top:6px; font-size:0.85rem; min-height:40px;"></pre>
                    </div>
                    <div>
                        <strong>ã‚»ãƒ³ãƒˆãƒ­ã‚¤ãƒ‰ï¼ˆé‡ã¿ä»˜ãï¼‰</strong> â€” points: <input type="text" id="d-centroid-pts" placeholder="[[0,0],[1,0],[0,1]]" style="width:180px"> Î±: <input type="number" id="d-centroid-a" value="0.5" min="0.01" max="0.99" step="0.1" style="width:50px">
                        <button onclick="calcCentroid()">è¨ˆç®—</button>
                        <pre id="out-centroid" style="margin-top:6px; font-size:0.85rem; min-height:40px;"></pre>
                    </div>
                    <div>
                        <strong>k-means++ åˆæœŸã‚·ãƒ¼ãƒ‰</strong> â€” points: <input type="text" id="d-kmeans-pts" placeholder="[[0,0],[1,1],[2,0],[0,2]]" style="width:160px"> k: <input type="number" id="d-kmeans-k" value="2" min="1" style="width:40px">
                        <button onclick="calcKmeansPP()">è¨ˆç®—</button>
                        <pre id="out-kmeans" style="margin-top:6px; font-size:0.85rem; min-height:40px;"></pre>
                    </div>
                </div>
            </div>
            <div class="panel" style="border-color: var(--accent);">
                <h3>ğŸ“ éŸ³å£°å¤‰æ›ã®æå¤±å¼ï¼ˆè«–æ–‡ã©ãŠã‚Šï¼‰</h3>
                <p style="color: var(--text-muted); margin-bottom: 8px;">CycleGAN-VC: L_G = L_adv + Î»_cyc L_cyc + Î»_id L_idã€‚StarGAN-VC: L_G = L_adv + Î»_cls L_cls^r + Î»_cyc L_cyc + Î»_id L_idã€‚API ã§ä¸ãˆãŸãƒ­ã‚¸ãƒƒãƒˆãƒ»å†æ§‹æˆèª¤å·®ã‹ã‚‰æå¤±ã‚’è¨ˆç®—ã—ã¾ã™ã€‚</p>
                <div class="grid2">
                    <div>
                        <strong>CycleGAN æå¤±</strong> â€” fake_logits, real_logits, reconstructed, original (é…åˆ—), Î»_cyc, Î»_id<br>
                        <input type="text" id="loss-fake" placeholder="[0.3,0.4]" style="width:80px"> <input type="text" id="loss-real" placeholder="[0.7,0.8]" style="width:80px"> <input type="text" id="loss-recon" placeholder="[0.1,0.2]" style="width:80px"> <input type="text" id="loss-orig" placeholder="[0.1,0.2]" style="width:80px">
                        <button onclick="calcCycleGANLoss()">è¨ˆç®—</button>
                        <pre id="out-cyclegan" style="margin-top:6px; font-size:0.85rem; min-height:50px;"></pre>
                    </div>
                    <div>
                        <strong>StarGAN æå¤±</strong> â€” fake/real logits, domain_fake/real, Î»_cls, Î»_cyc, Î»_id<br>
                        <input type="text" id="loss-s-fake" placeholder="[0.4]" style="width:60px"> <input type="text" id="loss-s-real" placeholder="[0.7]" style="width:60px"> <input type="text" id="loss-s-df" placeholder="[0.8]" style="width:60px"> <input type="text" id="loss-s-dr" placeholder="[0.9]" style="width:60px">
                        <button onclick="calcStarGANLoss()">è¨ˆç®—</button>
                        <pre id="out-stargan" style="margin-top:6px; font-size:0.85rem; min-height:50px;"></pre>
                    </div>
                </div>
            </div>
            <div class="panel">
                <h3>è·é›¢ãƒ»ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹ã®å½¹å‰²</h3>
                <p style="color: var(--text-muted); margin-bottom: 12px;">éŸ³å£°ãƒ»ä¿¡å·å‡¦ç†ãƒ»æ©Ÿæ¢°å­¦ç¿’ã§ã¯ã€åˆ†å¸ƒã‚„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿é–“ã®ã€Œè·é›¢ã€$D(\cdot, \cdot)$ ã®é¸ã³æ–¹ãŒé‡è¦ã§ã™ã€‚ãƒ‘ãƒ©ãƒ¡ãƒˆãƒªãƒƒã‚¯ãªæ— $D_\alpha(\cdot, \cdot)$ ã‚„ã€å‡¸ä¸ç­‰å¼ã®ã‚®ãƒ£ãƒƒãƒ—ã‹ã‚‰å°ã‹ã‚Œã‚‹ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹ãŒã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ãƒ»æƒ…å ±å¹¾ä½•ãƒ»å­¦ç¿’ã«ä½¿ã‚ã‚Œã¾ã™ã€‚ä»¥ä¸‹ã¯ Frank Nielsen ã® Chord Gap / Jensen / Bregman / Bhattacharyya ã«é–¢ã™ã‚‹ç†è«–ã®è¦ç´„ã§ã™ã€‚</p>
            </div>
            <div class="panel">
                <h3>1. Jensen ä¸ç­‰å¼ã¨ Jensen ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹ï¼ˆBurbeaâ€“Raoï¼‰</h3>
                <p style="color: var(--text-muted); margin-bottom: 10px;">$F$ ã‚’ç‹­ç¾©å‡¸é–¢æ•°ã¨ã™ã‚‹ã¨ãã€Jensen ã®ä¸ç­‰å¼ã‚ˆã‚Š</p>
                <div class="math-block">$$F\!\left(\frac{p+q}{2}\right) \leq \frac{F(p)+F(q)}{2}.$$</div>
                <p style="color: var(--text-muted); margin-bottom: 8px;">ã“ã®ä¸ç­‰å¼ã®ã‚®ãƒ£ãƒƒãƒ—ãŒ Jensen ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹ï¼ˆBurbeaâ€“Raoï¼‰ã€‚è«–æ–‡ã§ã¯ Index terms: Jensen/Burbeaâ€“Rao divergence, Bregman divergence, centroid, k-means++ã€‚</p>
                <div class="math-block">$$J_F(p,q) = \frac{F(p)+F(q)}{2} - F\!\left(\frac{p+q}{2}\right) \geq 0.$$</div>
            </div>
            <div class="panel">
                <h3>2. ã‚¹ã‚­ãƒ¥ãƒ¼ Jensen ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹ï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ $\alpha \in (0,1)$ï¼‰</h3>
                <p style="color: var(--text-muted); margin-bottom: 8px;">é‡ã¿ä»˜ãå¹³å‡ $(1-\alpha)p + \alpha q$ ã«å¯¾ã™ã‚‹å‡¸ä¸ç­‰å¼ã®ã‚®ãƒ£ãƒƒãƒ—ã§ã€ãƒ‘ãƒ©ãƒ¡ãƒˆãƒªãƒƒã‚¯æ—ã‚’å®šç¾©ã™ã‚‹:</p>
                <div class="math-block">$$J_F^\alpha(p : q) = (1-\alpha)F(p) + \alpha F(q) - F\bigl((1-\alpha)p + \alpha q\bigr).$$</div>
                <p style="color: var(--text-muted); margin-bottom: 8px;">åˆ¥è¡¨è¨˜ï¼ˆ$(pq)_\lambda := (1-\lambda)p + \lambda q$ ã¨ã—ã¦ï¼‰:</p>
                <div class="math-block">$$J_F^\alpha(p : q) = (F(p)\,F(q))_\alpha - F((pq)_\alpha), \quad \text{ä¸€èˆ¬ã«éå¯¾ç§° } J_F^\alpha(p:q) \neq J_F^\alpha(q:p).$$</div>
            </div>
            <div class="panel">
                <h3>3. Bregman ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹ã¨æ¥µé™</h3>
                <p style="color: var(--text-muted); margin-bottom: 8px;">$F$ ãŒç‹­ç¾©å‡¸ã‹ã¤å¾®åˆ†å¯èƒ½ãªã¨ãã€Bregman ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹ã¯</p>
                <div class="math-block">$$B_F(p : q) = F(p) - F(q) - (p-q)^\top \nabla F(q).$$</div>
                <p style="color: var(--text-muted); margin-bottom: 8px;">ã‚¹ã‚­ãƒ¥ãƒ¼ Jensen ã®ã‚¹ã‚±ãƒ¼ãƒ«ç‰ˆ $sJ_F^\alpha(p:q) = \frac{1}{1-\alpha} J_F^\alpha(p:q)$ ã¯ã€$\alpha \to 0^+$ ã¾ãŸã¯ $\alpha \to 1^-$ ã§ Bregman ã‚’æ¥µé™ã¨ã—ã¦å«ã‚€ã€‚Taylorâ€“Lagrange å½¢ï¼ˆä¸­é–“ç‚¹ $\xi \in [p,q]$ï¼‰:</p>
                <div class="math-block">$$B_F(p|q) = \frac{1}{2}(p-q)^\top \nabla^2 F(\xi)\,(p-q).$$</div>
            </div>
            <div class="panel">
                <h3>4. çµ±è¨ˆçš„è·é›¢ï¼šBhattacharyya ã¨ KL</h3>
                <p style="color: var(--text-muted); margin-bottom: 8px;">åˆ†å¸ƒ $p(x), q(x)$ ã«å¯¾ã™ã‚‹ã‚¹ã‚­ãƒ¥ãƒ¼ Bhattacharyya è·é›¢ã¨ Kullbackâ€“Leibler:</p>
                <div class="math-block">$$\mathrm{Bhat}_\alpha(p : q) = -\log \int p(x)^{1-\alpha} q(x)^\alpha \,dx, \qquad \mathrm{KL}(p:q) = \int p(x) \log \frac{p(x)}{q(x)}\,dx.$$</div>
                <p style="color: var(--text-muted); margin-bottom: 8px;">æŒ‡æ•°æ— $p(x;\theta) = \exp(\theta^\top x - F(\theta))$ ã§ã¯ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç©ºé–“ä¸Šã§ $\mathrm{Bhat}(p(\cdot;\theta_1) : p(\cdot;\theta_2)) = J_F^\alpha(\theta_1 : \theta_2)$ ã¨ä¸€è‡´ã—ã€$\mathrm{KL}$ ã¯ Bregman ã«å¯¾å¿œã™ã‚‹ï¼ˆFig. 1 ã®å¯¾å¿œï¼‰ã€‚</p>
            </div>
            <div class="panel">
                <h3>5. Chord Gap ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹ï¼ˆä¸‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ—ï¼‰</h3>
                <p style="color: var(--text-muted); margin-bottom: 8px;">Nielsen ã¯ã€Œä¸Šå¼¦ã€ã¨ã€Œä¸‹å¼¦ã€ã®å‚ç›´ã‚®ãƒ£ãƒƒãƒ—ã¨ã—ã¦ chord gap ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹ $J_F^{\alpha,\beta,\gamma}(p:q)$ ã‚’å°å…¥ã—ã€ã‚¹ã‚­ãƒ¥ãƒ¼ Jensen ã¨çµ±è¨ˆçš„ Bhattacharyya ã‚’ä¸€èˆ¬åŒ–ã™ã‚‹ã€‚äºŒã¤ã®ã‚¹ã‚­ãƒ¥ãƒ¼ Jensen ã®å·®ã¨ã—ã¦:</p>
                <div class="math-block">$$J_F^{\beta,\gamma}(p:q) = J_F^\alpha(p:q) - J_F^\alpha((pq)_\alpha : (pq)_s), \quad \lambda = \lambda(\alpha,\beta,\gamma).$$</div>
                <p style="color: var(--text-muted); margin-bottom: 8px;">ä¸€èˆ¬åŒ– Bhattacharyya è·é›¢ï¼ˆæŒ‡æ•°æ—ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ $\theta_p, \theta_q$ï¼‰ã¯ä¸‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ— $\mathrm{Bhat}_{\alpha,\beta,\gamma}(\theta_p : \theta_q)$ ã¨ã—ã¦å®šç¾©ã•ã‚Œã€$\alpha=\beta$ ã®ã¨ãå¾“æ¥ã®ã‚¹ã‚­ãƒ¥ãƒ¼ Bhattacharyya ã«å¸°ç€ã™ã‚‹ã€‚</p>
            </div>
            <div class="panel">
                <h3>6. ã‚»ãƒ³ãƒˆãƒ­ã‚¤ãƒ‰ã¨ k-means++</h3>
                <p style="color: var(--text-muted); margin-bottom: 8px;">é‡ã¿ä»˜ãç‚¹é›†åˆ $P = \{(w_i, p_i)\}$ ã«å¯¾ã™ã‚‹ chord gap ã‚»ãƒ³ãƒˆãƒ­ã‚¤ãƒ‰ã¯ã€$A(x)-B(x)$ï¼ˆ$A,B$ ã¯ç‹­ç¾©å‡¸ï¼‰ã®æœ€å°åŒ–ã¨ãªã‚Šã€åå¾©çš„ concaveâ€“convex procedure (CCCP) ã§è§£ã:</p>
                <div class="math-block">$$\nabla A(x_{t+1}) = \nabla B(x_t), \qquad x_{t+1} = (\nabla A)^{-1}(\nabla B(x_t)).$$</div>
                <p style="color: var(--text-muted); margin-bottom: 8px;">$\alpha=\beta=\gamma$ ã®ã¨ãã€ã‚¹ã‚­ãƒ¥ãƒ¼ Jensen ã‚»ãƒ³ãƒˆãƒ­ã‚¤ãƒ‰ã®æ›´æ–°ã¯ $x_{t+1} = \nabla F^{-1}\bigl(\sum_i w_i \nabla F((p_i x_t)_\alpha)\bigr)$ã€‚k-means++ ã®ç«¶åˆæ¯”ã¯ã€ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹ãŒ $U$-ä¸‰è§’ä¸ç­‰å¼ $D(x:z) \leq U(D(x:y)+D(y:z))$ ã‚’æº€ãŸã™ã¨ã $O(\log k)$ ã®ä¿è¨¼ã‚’æŒã¤ã€‚</p>
            </div>
            <div class="panel">
                <h3>7. Skew Jensenâ€“Bregman (JB) ã¨ Taylorâ€“Lagrange å½¢</h3>
                <p style="color: var(--text-muted); margin-bottom: 8px;">ã‚¹ã‚­ãƒ¥ãƒ¼ Jensenâ€“Bregman ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹ã¯äºŒã¤ã® Bregman ã®é‡ã¿ä»˜ãå’Œ:</p>
                <div class="math-block">$$\mathrm{JB}_F^\alpha(p|q) = (1-\alpha) B_F(p : (pq)_\alpha) + \alpha B_F(q : (pq)_\alpha).$$</div>
                <p style="color: var(--text-muted); margin-bottom: 8px;">ã‚¹ã‚­ãƒ¥ãƒ¼ Jensen ã® Taylorâ€“Lagrange å½¢ï¼ˆä¸­é–“ç‚¹ $\xi_1, \xi_2$ï¼‰ã¯ $H_\alpha^{p|q}$ ã‚’ç”¨ã„ã¦ $J_F^\alpha(p|q)$ ã¨çµã³ã¤ãã€ä¸‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ chord gap ã® Taylorâ€“Lagrange å½¢ $H_{\alpha,\beta,\gamma}^{p|q}$ ã¯ $\nabla^2 F(\xi'), \nabla^2 F(\xi'')$ ã§è¡¨ã•ã‚Œã‚‹ã€‚æœ‰é™ç‚¹é›†åˆ $P$ ä¸Šã§æ¯” $\rho = \sup/\inf$ ãŒæœ‰é™ãªã‚‰ã€k-means++ ã®è§£æã«åˆ©ç”¨ã§ãã‚‹ã€‚</p>
            </div>
            <div class="panel">
                <h3>8. å®Ÿè£…ã—ãŸå¼ã®ä¸€è¦§ï¼ˆè«–æ–‡ã©ãŠã‚Šï¼‰</h3>
                <p style="color: var(--text-muted); margin-bottom: 8px;">æœ¬ã‚µã‚¤ãƒˆã® API ã§è¨ˆç®—ã—ã¦ã„ã‚‹å¼:</p>
                <ul style="color: var(--text-muted); padding-left: 20px; line-height: 2;">
                    <li><strong>Jensen</strong> â€” $J_F(p,q) = \frac{F(p)+F(q)}{2} - F((p+q)/2)$ï¼ˆF: squared / entropyï¼‰</li>
                    <li><strong>ã‚¹ã‚­ãƒ¥ãƒ¼ Jensen</strong> â€” $J_F^\alpha(p:q) = (1-\alpha)F(p) + \alpha F(q) - F((1-\alpha)p + \alpha q)$</li>
                    <li><strong>Bregman</strong> â€” $B_F(p:q) = F(p) - F(q) - (p-q)^\top \nabla F(q)$</li>
                    <li><strong>Skew Jensenâ€“Bregman</strong> â€” $\mathrm{JB}_F^\alpha(p|q) = (1-\alpha)B_F(p:(pq)_\alpha) + \alpha B_F(q:(pq)_\alpha)$</li>
                    <li><strong>Bhattacharyya</strong> â€” ã‚¬ã‚¦ã‚¹åŒå£«ã®é–‰å½¢å¼ã€é›¢æ•£åˆ†å¸ƒã® $-\log \sum\sqrt{p_i q_i}$</li>
                    <li><strong>Chord gap</strong> â€” äºŒãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ— $J_F^{\beta,\gamma}(p:q)$ï¼ˆä¸Šè¨˜è¨ˆç®—ãƒ‡ãƒ¢ã® API ã§è¨ˆç®—å¯èƒ½ï¼‰</li>
                    <li><strong>ã‚»ãƒ³ãƒˆãƒ­ã‚¤ãƒ‰</strong> â€” é‡ã¿ä»˜ãã‚¹ã‚­ãƒ¥ãƒ¼ Jensen ã‚»ãƒ³ãƒˆãƒ­ã‚¤ãƒ‰ï¼ˆF=squared ã¯é–‰å½¢å¼ã§é‡ã¿ä»˜ãå¹³å‡ï¼‰</li>
                    <li><strong>k-means++</strong> â€” ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹ã«åŸºã¥ã $D^2$ é‡ã¿ä»˜ãç¢ºç‡ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã§åˆæœŸã‚·ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ</li>
                    <li><strong>CycleGAN-VC æå¤±</strong> â€” $L_G = L_{adv} + \lambda_{cyc} L_{cyc} + \lambda_{id} L_{id}$</li>
                    <li><strong>StarGAN-VC æå¤±</strong> â€” $L_G = L_{adv} + \lambda_{cls} L_{cls}^r + \lambda_{cyc} L_{cyc} + \lambda_{id} L_{id}$</li>
                </ul>
            </div>
            <div class="panel paper-ref">
                <h4>å‚è€ƒæ–‡çŒ®</h4>
                <p><strong>Frank Nielsen</strong>, "The chord gap divergence and a generalization of the Bhattacharyya distance," Ã‰cole Polytechnique &amp; Sony CSL. Index terms: Jensen/Burbeaâ€“Rao divergence, Bregman divergence, centroid, k-means++. å†ç¾ç”¨ã‚³ãƒ¼ãƒ‰: <a href="https://www.lix.polytechnique.fr/~nielsen/CGD/" target="_blank" rel="noopener" style="color: var(--accent);">lix.polytechnique.fr/~nielsen/CGD/</a></p>
            </div>
        </div>

        <div id="advanced" class="tab-content">
            <div class="panel">
                <h3>è©³ç´°ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸</h3>
                <p style="margin-bottom:12px;">å„æ‰‹æ³•ã®æ•°å¼ãƒ»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ»ç°¡æ˜“ãƒ‡ãƒ¢ã‚’ã¾ã¨ã‚ãŸãƒšãƒ¼ã‚¸ã§ã™ã€‚</p>
                <a href="research.html" style="color: var(--accent); font-weight: 600;">research.html ã‚’é–‹ã â†’</a>
            </div>
        </div>

        <footer class="footer-ack">
            <p><strong>è¬è¾</strong> â€” æœ¬ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¯ä»¥ä¸‹ã®å›½éš›ä¼šè­°è«–æ–‡ã¨è‘—è€…ã«åŸºã¥ã„ã¦ã„ã¾ã™ã€‚</p>
            <p style="margin-top:8px;">WaveNet (NIPS 2016) Â· CycleGAN-VC (EUSIPCO 2018, ICASSP 2019) Â· StarGAN-VC (SLT 2018, ICASSP 2019) Â· AutoVC (NeurIPS 2019) Â· VITS (ICML 2021)</p>
        </footer>
    </div>

    <script>
        var isLocal = (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1');
        var isNetlify = !isLocal && (window.location.hostname.includes('netlify.app') || window.location.hostname.includes('netlify.com'));
        var API = {
            formant: isLocal ? 'http://localhost:5000/api/formant/synthesize' : '/.netlify/functions/formant_synthesize',
            f0:       isLocal ? 'http://localhost:5000/api/f0/analyze'           : '/.netlify/functions/f0_analyze',
            voice:    isLocal ? 'http://localhost:5000/api/voice/convert'        : '/.netlify/functions/voice_convert',
            health:   isLocal ? 'http://localhost:5000/api/health'              : '/.netlify/functions/api_health'
        };
        function apiErrorDetail(url, status, err) {
            var msg = 'æ¥ç¶šã§ãã¾ã›ã‚“ã§ã—ãŸ: ' + (url || 'API') + (status ? ' (' + status + ')' : '');
            if (isNetlify && (status === 404 || status === 502 || status === 503)) {
                msg += '\n\nNetlify Functions ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»ãƒ“ãƒ«ãƒ‰ãƒ­ã‚°ã‚’ã”ç¢ºèªãã ã•ã„ã€‚';
            } else if (isLocal) { msg += '\n\nresearch_api.py ã‚’èµ·å‹•ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ (python research_api.py)'; }
            else if (status !== 404) { msg += '\n\nã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚'; }
            return msg + (err ? '\n\n' + err : '');
        }
        (function checkApiAvailable() {
            if (!isNetlify) return;
            var banner = document.getElementById('api-unavailable-banner');
            fetch(API.health, { method: 'GET', cache: 'no-store' }).then(function(r) { if (!r.ok) banner.classList.add('show'); }).catch(function() { banner.classList.add('show'); });
        })();
        function switchTab(id, el) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if (el) el.classList.add('active');
            if (window.MathJax && id === 'divergence') window.MathJax.typesetPromise && window.MathJax.typesetPromise().catch(function() {});
        }
        var API_BASE_FULL = isLocal ? 'http://localhost:5000' : '';
        function parseJson(id, def) { try { return JSON.parse(document.getElementById(id).value || def); } catch (e) { return def; } }
        function divergenceApi(action, body) {
            var url = isLocal ? API_BASE_FULL + '/api/divergence/' + action : '/.netlify/functions/divergence';
            var payload = isLocal ? body : Object.assign({ action: action }, body);
            return { url: url, body: payload };
        }
        function voiceLossApi(action, body) {
            var url = isLocal ? API_BASE_FULL + '/api/voice/' + action : '/.netlify/functions/voice_loss';
            var payload = isLocal ? body : Object.assign({ action: action }, body);
            return { url: url, body: payload };
        }
        function calcJensen() {
            var p = parseJson('d-jensen-p', '[0,0]'), q = parseJson('d-jensen-q', '[1,1]'), F = document.getElementById('d-jensen-f').value;
            var api = divergenceApi('jensen', { p: p, q: q, F: F });
            fetch(api.url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(api.body) })
                .then(function(r) { return r.json(); }).then(function(j) { document.getElementById('out-jensen').textContent = JSON.stringify(j, null, 2); })
                .catch(function(e) { document.getElementById('out-jensen').textContent = 'Error: ' + e.message; });
        }
        function calcSkewJensen() {
            var p = parseJson('d-skew-p', '[0,0]'), q = parseJson('d-skew-q', '[1,1]'), alpha = parseFloat(document.getElementById('d-skew-a').value);
            var api = divergenceApi('skew_jensen', { p: p, q: q, alpha: alpha, F: 'squared' });
            fetch(api.url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(api.body) })
                .then(function(r) { return r.json(); }).then(function(j) { document.getElementById('out-skew').textContent = JSON.stringify(j, null, 2); })
                .catch(function(e) { document.getElementById('out-skew').textContent = 'Error: ' + e.message; });
        }
        function calcBregman() {
            var p = parseJson('d-bregman-p', '[1,1]'), q = parseJson('d-bregman-q', '[2,2]'), F = document.getElementById('d-bregman-f').value;
            var api = divergenceApi('bregman', { p: p, q: q, F: F });
            fetch(api.url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(api.body) })
                .then(function(r) { return r.json(); }).then(function(j) { document.getElementById('out-bregman').textContent = JSON.stringify(j, null, 2); })
                .catch(function(e) { document.getElementById('out-bregman').textContent = 'Error: ' + e.message; });
        }
        function calcBhattacharyya() {
            var m1 = parseFloat(document.getElementById('d-bhat-m1').value), v1 = parseFloat(document.getElementById('d-bhat-v1').value), m2 = parseFloat(document.getElementById('d-bhat-m2').value), v2 = parseFloat(document.getElementById('d-bhat-v2').value);
            var api = divergenceApi('bhattacharyya', { mean1: m1, var1: v1, mean2: m2, var2: v2 });
            fetch(api.url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(api.body) })
                .then(function(r) { return r.json(); }).then(function(j) { document.getElementById('out-bhat').textContent = JSON.stringify(j, null, 2); })
                .catch(function(e) { document.getElementById('out-bhat').textContent = 'Error: ' + e.message; });
        }
        function calcChordGap() {
            var p = parseJson('d-chord-p', '[0,0]'), q = parseJson('d-chord-q', '[1,1]'), beta = parseFloat(document.getElementById('d-chord-beta').value), gamma = parseFloat(document.getElementById('d-chord-gamma').value);
            var api = divergenceApi('chord_gap', { p: p, q: q, beta: beta, gamma: gamma, F: 'squared' });
            fetch(api.url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(api.body) })
                .then(function(r) { return r.json(); }).then(function(j) { document.getElementById('out-chord').textContent = JSON.stringify(j, null, 2); })
                .catch(function(e) { document.getElementById('out-chord').textContent = 'Error: ' + e.message; });
        }
        function calcJB() {
            var p = parseJson('d-jb-p', '[1,1]'), q = parseJson('d-jb-q', '[2,2]'), alpha = parseFloat(document.getElementById('d-jb-a').value);
            var api = divergenceApi('jensen_bregman', { p: p, q: q, alpha: alpha, F: 'squared' });
            fetch(api.url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(api.body) })
                .then(function(r) { return r.json(); }).then(function(j) { document.getElementById('out-jb').textContent = JSON.stringify(j, null, 2); })
                .catch(function(e) { document.getElementById('out-jb').textContent = 'Error: ' + e.message; });
        }
        function calcCentroid() {
            var points = parseJson('d-centroid-pts', '[[0,0],[1,0],[0,1]]'), alpha = parseFloat(document.getElementById('d-centroid-a').value);
            var w = Array(points.length).fill(1.0 / points.length);
            var api = divergenceApi('centroid', { points: points, weights: w, alpha: alpha, F: 'squared' });
            fetch(api.url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(api.body) })
                .then(function(r) { return r.json(); }).then(function(j) { document.getElementById('out-centroid').textContent = JSON.stringify(j, null, 2); })
                .catch(function(e) { document.getElementById('out-centroid').textContent = 'Error: ' + e.message; });
        }
        function calcKmeansPP() {
            var points = parseJson('d-kmeans-pts', '[[0,0],[1,1],[2,0],[0,2]]'), k = parseInt(document.getElementById('d-kmeans-k').value, 10);
            var api = divergenceApi('kmeans_pp', { points: points, k: k, alpha: 0.5 });
            fetch(api.url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(api.body) })
                .then(function(r) { return r.json(); }).then(function(j) { document.getElementById('out-kmeans').textContent = JSON.stringify(j, null, 2); })
                .catch(function(e) { document.getElementById('out-kmeans').textContent = 'Error: ' + e.message; });
        }
        function calcCycleGANLoss() {
            var fake = parseJson('loss-fake', '[0.3,0.4]'), real = parseJson('loss-real', '[0.7,0.8]'), recon = parseJson('loss-recon', '[0.1,0.2]'), orig = parseJson('loss-orig', '[0.1,0.2]');
            var api = voiceLossApi('cyclegan_loss', { fake_logits: fake, real_logits: real, reconstructed: recon, original: orig, lambda_cyc: 10, lambda_id: 5 });
            fetch(api.url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(api.body) })
                .then(function(r) { return r.json(); }).then(function(j) { document.getElementById('out-cyclegan').textContent = JSON.stringify(j, null, 2); })
                .catch(function(e) { document.getElementById('out-cyclegan').textContent = 'Error: ' + e.message; });
        }
        function calcStarGANLoss() {
            var fake = parseJson('loss-s-fake', '[0.4]'), real = parseJson('loss-s-real', '[0.7]'), df = parseJson('loss-s-df', '[0.8]'), dr = parseJson('loss-s-dr', '[0.9]');
            var api = voiceLossApi('stargan_loss', { fake_logits: fake, real_logits: real, domain_logits_fake: df, domain_logits_real: dr });
            fetch(api.url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(api.body) })
                .then(function(r) { return r.json(); }).then(function(j) { document.getElementById('out-stargan').textContent = JSON.stringify(j, null, 2); })
                .catch(function(e) { document.getElementById('out-stargan').textContent = 'Error: ' + e.message; });
        }
        let demoAudioBuffer = null;
        document.getElementById('demo-spectrum-file').onchange = async function(e) {
            var f = e.target.files[0]; if (!f) return;
            var url = URL.createObjectURL(f);
            document.getElementById('demo-audio').src = url;
            var ctx = new (window.AudioContext || window.webkitAudioContext)();
            var ab = await fetch(url).then(r => r.arrayBuffer());
            demoAudioBuffer = await ctx.decodeAudioData(ab);
            drawWaveform(demoAudioBuffer, 'demo-waveform');
            drawSpectrogramSimple(demoAudioBuffer, 'demo-spectrogram');
            URL.revokeObjectURL(url);
        };
        function drawWaveform(buffer, canvasId) {
            var canvas = document.getElementById(canvasId); if (!canvas || !buffer) return;
            var ctx = canvas.getContext('2d'), w = canvas.width = canvas.offsetWidth, h = canvas.height;
            var ch = buffer.getChannelData(0), step = Math.floor(ch.length / w);
            ctx.fillStyle = '#0f172a'; ctx.fillRect(0, 0, w, h);
            ctx.strokeStyle = '#3b82f6'; ctx.beginPath();
            for (var x = 0; x < w; x++) { var i = Math.min(x * step, ch.length - 1), y = (1 - ch[i]) / 2 * h; if (x === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y); }
            ctx.stroke();
        }
        function drawSpectrogramSimple(buffer, canvasId) {
            var canvas = document.getElementById(canvasId); if (!canvas || !buffer) return;
            var ctx = canvas.getContext('2d'), w = canvas.width = canvas.offsetWidth, h = canvas.height;
            var ch = buffer.getChannelData(0), sr = buffer.sampleRate, fftSize = 1024, hop = fftSize / 2;
            var win = new Float32Array(fftSize); for (var i = 0; i < fftSize; i++) win[i] = 0.5 - 0.5 * Math.cos(2 * Math.PI * i / (fftSize - 1));
            var nFrames = Math.floor((ch.length - fftSize) / hop) + 1, outW = Math.min(nFrames, Math.max(w, 400)), outH = Math.min(Math.floor(fftSize / 2), h || 200);
            var mag = new Float32Array(outW * outH);
            for (var fi = 0; fi < outW; fi++) {
                var start = fi * hop, re = new Float32Array(fftSize), im = new Float32Array(fftSize);
                for (var i = 0; i < fftSize; i++) { re[i] = ch[start + i] * win[i]; im[i] = 0; }
                fft(re, im);
                for (var k = 0; k < outH; k++) mag[fi + k * outW] = Math.sqrt(re[k] * re[k] + im[k] * im[k]);
            }
            var max = 0; for (var i = 0; i < mag.length; i++) if (mag[i] > max) max = mag[i];
            var img = ctx.createImageData(outW, outH);
            for (var y = 0; y < outH; y++) for (var x = 0; x < outW; x++) {
                var v = Math.min(1, mag[x + y * outW] / (max || 1)), i = (y * outW + x) * 4;
                img.data[i] = v * 255; img.data[i+1] = v * 100; img.data[i+2] = 200; img.data[i+3] = 255;
            }
            canvas.width = outW; canvas.height = outH; ctx.putImageData(img, 0, 0);
        }
        function fft(re, im) { var n = re.length; for (var k = 0; k < n; k++) { var sr = 0, si = 0; for (var t = 0; t < n; t++) { var angle = -2 * Math.PI * k * t / n; sr += re[t] * Math.cos(angle) - im[t] * Math.sin(angle); si += re[t] * Math.sin(angle) + im[t] * Math.cos(angle); } re[k] = sr; im[k] = si; } }
        function demoSpectrum() { var el = document.getElementById('demo-spectrum-file'); if (el.files.length === 0) { alert('ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸ã‚“ã§ãã ã•ã„'); return; } el.dispatchEvent(new Event('change')); }
        document.getElementById('formant-f0').oninput = function() { document.getElementById('formant-f0-val').textContent = this.value; };
        async function demoFormant() {
            try {
                var res = await fetch(API.formant, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ f0: parseInt(document.getElementById('formant-f0').value, 10), duration: 1.0 }) });
                if (!res.ok) throw new Error(apiErrorDetail(API.formant, res.status, null));
                var blob = await res.blob(); document.getElementById('formant-audio').src = URL.createObjectURL(blob);
            } catch (e) { alert(e.message.indexOf('æ¥ç¶šã§ãã¾ã›ã‚“ã§ã—ãŸ') >= 0 ? e.message : apiErrorDetail(API.formant, null, e.message)); }
        }
        async function demoF0() {
            var fileInput = document.getElementById('demo-f0-file'); if (!fileInput.files[0]) { alert('ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸ã‚“ã§ãã ã•ã„'); return; }
            var fd = new FormData(); fd.append('audio', fileInput.files[0]);
            try {
                var res = await fetch(API.f0, { method: 'POST', body: fd });
                var text = await res.text();
                var errDetail = null;
                try { var j = JSON.parse(text); if (j && j.error) errDetail = j.error; } catch (_) {}
                if (!res.ok) {
                    document.getElementById('f0-result').textContent = apiErrorDetail(API.f0, res.status, errDetail);
                    return;
                }
                document.getElementById('f0-result').textContent = text ? (function(){ try { return JSON.stringify(JSON.parse(text), null, 2); } catch(_){ return text; } })() : '';
            } catch (e) { document.getElementById('f0-result').textContent = apiErrorDetail(API.f0, (e.message && e.message.match(/\d{3}/)) ? e.message.match(/\d{3}/)[0] : null, e.message); }
        }
        async function demoSimpleVC() {
            var fileInput = document.getElementById('demo-vc-file'); if (!fileInput.files[0]) { alert('ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸ã‚“ã§ãã ã•ã„'); return; }
            var fd = new FormData(); fd.append('audio', fileInput.files[0]); fd.append('type', 'pitch'); fd.append('strength', document.getElementById('demo-vc-strength').value);
            try {
                var res = await fetch(API.voice, { method: 'POST', body: fd });
                if (!res.ok) throw new Error(apiErrorDetail(API.voice, res.status, null));
                document.getElementById('vc-output').src = URL.createObjectURL(await res.blob());
            } catch (e) { alert(e.message.indexOf('æ¥ç¶šã§ãã¾ã›ã‚“ã§ã—ãŸ') >= 0 ? e.message : apiErrorDetail(API.voice, null, e.message)); }
        }
    </script>
</body>
</html>
